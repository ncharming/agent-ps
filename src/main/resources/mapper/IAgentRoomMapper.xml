<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.bonc.plugin.agent.mapper.IAgentRoomMapper">
    <resultMap id="deptFloorDict" type="com.bonc.plugin.agent.entity.DeptFloorDictEntity" >
        <result column="dept_no" property="deptNo" />
        <result column="dept_name" property="deptName" />
        <result column="floor" property="floor" />
    </resultMap>
    <resultMap id="reservationList" type="com.bonc.plugin.agent.entity.RoomReservationEntityVo" >
        <result column="meeting_name" property="meetingname" />
        <result column="start_time" property="startTime" />
        <result column="terminal_time" property="terminalTime" />
        <result column="room_name" property="name1" />
        <result column="user_id" property="userid" />
        <result column="sqdept_name" property="sqdeptname" />
        <result column="telephone" property="telephone" />
        <result column="insert_date" property="date" />
    </resultMap>
    <insert id="insertlog" parameterType="com.bonc.plugin.agent.entity.RoomReservationEntityReq">
        insert into agent_room_reservation (meeting_name,start_time,terminal_time,room_name,
                                                user_id,sqdept_name,telephone,insert_date)
        values(#{meetingname},#{startTime},#{terminalTime},#{name1},#{userid},#{sqdeptname},#{telephone},#{date})

    </insert>


    <select id="selectDict" resultMap="deptFloorDict" parameterType="java.lang.String">
         select * from agent_dept_floor_dict where dept_no=#{deptNo} limit 1
    </select>
    <select id="selectReservationList" resultMap="reservationList">
         select * from  agent_room_reservation
        <where>
            <if test="loginId!=null and loginId!=''">
                user_id=#{loginId}
            </if>
            <if test="date!=null and date!=''">
                insert_date=#{date}
            </if>
        </where>
    </select>


</mapper>
